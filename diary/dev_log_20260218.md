# 🚀 Curiostar Dev Log: Voyage Mode & UX Overhaul

**Date:** 2024-05-22
**Focus:** Camera Logic, Voyage Mode Interaction, HUD Animation
**Status:** Stable / Enhanced

---

## ✅ Today's Accomplishments (오늘의 작업)

### 1. Hybrid Voyage Control (하이브리드 항해 제어)
- **Problem:** 기존 자동운항 모드에서는 유저가 카메라를 제어할 수 없어 답답함이 있었음.
- **Solution:** `VoyageController`와 `OrbitControls`를 공존시킴.
    - 자동 운항 중에도 유저가 드래그(회전), 핀치(줌)를 통해 자유롭게 시점을 변경 가능.
    - 유저 인터랙션(`onStart`)이 감지되면 자동 회전 힘을 줄이고 유저의 입력을 우선시하도록 로직 수정.

### 2. Smart Auto-Pilot (지능형 자동 운항)
- **Problem:** 랜덤하게 이동하다 보니 별이 없는 깜깜한 허공을 바라보는 경우가 발생.
- **Solution:** **Vector3 Weighting Algorithm** 도입.
    - 카메라 전방(`dot product > 0.2`)에 위치한 별들의 **무게 중심(Centroid)**을 실시간으로 계산.
    - 카메라가 빈 공간이 아닌, '별들이 뭉쳐 있는 곳'을 향해 부드럽게 방향을 틀도록 구현 (`lerp` 사용).
    - 결과적으로 항상 시야에 별들이 들어오는 시네마틱한 뷰 확보.

### 3. Screen-Center Targeting (화면 중앙 타겟팅)
- **Problem:** 단순히 거리(Distance)가 가까운 별을 HUD에 띄우니, 화면 구석에 있는 별이 선택되어 직관적이지 않음.
- **Solution:** 3D 좌표를 2D 화면 좌표(Normalized Device Coordinates)로 변환.
    - 화면의 중앙점(Crosshair, 0,0)과 가장 가까운 별을 우선순위로 HUD를 표시하도록 변경.
    - 이제 유저가 바라보는(화면 중앙에 놓는) 별의 정보가 표시됨.

### 4. Smooth HUD Animation (HUD 애니메이션 고도화)
- **Problem:** 타겟이 바뀔 때 정보창이 툭툭 끊기며 사라져 시각적으로 거슬림.
- **Solution:** `Framer Motion`의 `AnimatePresence` 도입.
    - **Enter:** 0.3s (빠르고 경쾌하게 등장)
    - **Exit:** 1.5s (잔상을 남기며 천천히 페이드아웃)
    - 정보가 겹치더라도 부드럽게 교차되는 고급스러운 UI 연출.

### 5. Pacing Adjustment (속도 조절)
- 항해 속도를 기존 대비 50% 감속하여, 우주를 유영하는 듯한 여유로운 분위기 조성.

---

## 🚧 Current Issues & Observations (현재 상태 및 관찰)

- **Performance:** `Universe.tsx` 내에서 매 프레임(`useFrame`)마다 별들의 위치를 계산하고 정렬하는 로직이 포함되어 있음. 현재 50~200개 수준에서는 문제없으나, 별이 1,000개 이상으로 늘어날 경우 프레임 드랍 가능성 있음. (추후 최적화 필요)
- **Visual:** 배경이 단조로운 검은색/그라디언트임. 깊이감을 줄 수 있는 파티클이나 성운(Nebula) 효과가 있으면 몰입감이 배가될 것임.

---

## 📅 Next Steps (내일의 작업 계획)

### 1. Visual Aesthetics (심미성 강화)
- **Star Shader Upgrade:** 현재 단순한 구(Sphere)와 스프라이트(Sprite)로 되어있는 별을, 쉐이더(Shader)를 사용하여 조금 더 영롱하고 살아있는 느낌으로 개선.
- **Background Detail:** 먼 우주의 배경 별(Backdrop stars)이나 은은한 안개 효과 추가.

### 2. Audio Interaction (청각 경험) - *Recommended*
- 항해 모드 시 앰비언트 사운드(Ambient Sound) 재생.
- 별에 가까워지거나 클릭했을 때 반응하는 효과음(SFX) 추가로 '탐험'의 느낌 강화.

### 3. Data Integration (실데이터 연동 점검)
- `Gemini` 스트리밍 답변이 생성될 때, 해당 별이 우주에 실시간으로 '생성'되는 애니메이션 연출 강화 (펑 하고 터지며 나타나는 효과 등).

---

*"Exploring the cosmos, one line of code at a time."*
