# 🚀 Curiostar Dev Log: Visual Identity & Semantic Architecture

**Date:** 2026-02-20
**Focus:** UI Consistency, High-Fidelity Rendering, Vector Simulation
**Status:** Refined / Intelligent

---

## ✅ Today's Accomplishments (오늘의 작업)

### 1. Unified Color System (Indigo Harmony)
- **Problem:** 기존 별의 청록색(Cyan/Greenish) 발광이 UI의 Indigo 테마와 충돌하여 이질감을 형성함.
- **Solution:** **Tone & Manner Unification**.
    - 모든 별의 텍스처와 쉐이더 색상을 **Indigo(남색/보라)** 계열로 전면 교체.
    - `Glow Texture`와 `Distortion Material`을 UI 버튼 색상과 정확히 일치시켜, 인터페이스와 3D 오브젝트가 하나의 브랜드 아이덴티티를 공유하도록 통일.

### 2. High-Fidelity Star Core (고해상도 별 렌더링)
- **Problem:** 카메라가 가까워질수록 별의 텍스처가 깨져 보이고(Pixelated), 내부가 텅 빈 껍데기처럼 보여 '지식의 밀도'가 느껴지지 않음.
- **Solution:**
    - **Resolution Scale-up:** 텍스처 생성 캔버스를 `64px`에서 **`512px`**로 상향하여 그라데이션 품질 극대화.
    - **Inner Body Injection:** 투명한 왜곡장(Distortion) 내부에 불투명한 **'White/Ice Blue Core'**를 추가하여, 꽉 찬 에너지 덩어리로서의 볼륨감 구현.
    - **Poly Count Increase:** 구체(Sphere)의 세그먼트를 `16`에서 `32~64`로 늘려 실루엣의 각진 현상 제거.

### 3. Semantic Clustering (의미 기반 군집화)
- **Problem:** 기존의 나선형(Spiral) 은하 구조는 아름답지만, 인위적이었고 실제 사용자의 질문 패턴(의미적 유사성)을 반영하지 못함.
- **Solution:** **Topic-based Cloud Algorithm**.
    - 인위적인 나선 수식을 폐기하고, 주제(Topic)별로 3D 공간상의 **'의미 좌표(Center)'**를 할당.
    - 별들이 해당 주제 좌표 주변에 **구름(Cloud/Blob)** 형태로 분포되도록 변경하여, 실제 벡터 임베딩 공간(Vector Space)을 시각화하는 듯한 경험 제공.

### 4. Dynamic Repulsion Logic (동적 간격 조정)
- **Problem:** 군집화 과정에서 별들이 너무 밀집하여 시각적 간섭이 발생.
- **Solution:** **Collision Detection & Expansion**.
    - 별 생성 시 기존 별들과의 거리를 계산(`Distance Check < 4.0`).
    - 충돌 감지 시 해당 벡터를 **15%(`1.15x`)** 씩 재귀적으로 확장하여 빈 공간을 찾아가도록 하는 척력(Repulsion) 시뮬레이션 적용.

---

## 🚧 Current Issues & Observations (현재 상태 및 관찰)

- **Layout:** 주제별 군집(Cluster) 사이의 빈 공간(Void)이 꽤 넓게 형성됨. 이는 의미가 다른 주제들을 명확히 분리해 주는 장점이 있지만, 항해(Voyage) 시 다소 심심할 수 있음. 군집 사이를 잇는 웜홀이나 가이드 라인 고려 필요.
- **Performance:** 척력 알고리즘(Repulsion)은 별이 추가될 때마다 전체 별을 순회하므로, 별 개수가 5,000개를 넘어갈 경우 `WebWorker`로 연산을 분리해야 할 수도 있음.

---

## 📅 Next Steps (내일의 작업 계획)

### 1. Interaction Refinement (인터랙션 다듬기)
- 별을 클릭했을 때 발생하는 파동(Pulse) 효과를 Inner Body와 Outer Shell에 시차를 두고 적용하여 타격감 강화.

### 2. Cluster Visualization (군집 시각화)
- 각 주제(Topic)의 중심점에 희미한 텍스트 라벨이나 영역 표시를 추가하여, 멀리서도 어떤 지식 군집인지 식별 가능하도록 개선.

### 5. Critical Bug Fixes & Mobile Optimization (긴급 수정 및 모바일 최적화)
- **Star Disappearance Fix:**
    - **Problem:** `VoyageController`에서 카메라 위치가 `NaN` 또는 무한대로 발산하여 화면이 사라지는 현상 발생. 초기 렌더링 시 별 데이터가 비어있어 로직이 꼬이는 문제.
    - **Solution:**
        - 카메라 이동 벡터에 `isNaN` 체크 및 안전 장치(Safety Clamp) 추가.
        - `useState` 초기값에 `generateMockStars`를 직접 할당하여 초기 데이터 보장.
        - 배경 별(StarField)의 가시성을 높여(`size 3.0 -> 4.0`, `opacity 0.6 -> 0.8`) 공간감 확보.
- **Visual Balance Adjustment:**
    - **Problem:** 선택된 별의 크기가 너무 커서(2.5배) 주변 별들을 가리고 시각적으로 부담스러움.
    - **Solution:** 선택 시 확대 비율을 **1.2배**로 축소하고, 이에 맞춰 Glow 및 Cross 이펙트의 크기와 투명도를 재조정하여 자연스러운 강조 효과 구현.
- **Mobile UI Layout:**
    - **Problem:** 모바일 환경에서 하단 입력창과 FAB 버튼이 화면 가장자리에 너무 붙거나 잘리는 현상.
    - **Solution:**
        - CSS `env(safe-area-inset-bottom)`을 적용하여 아이폰 홈 바 영역 확보.
        - 좌우 패딩을 조정하여 모바일 뷰포트 내 안정적인 배치 구현.

---

*"Chaos is just order we haven't deciphered yet."*